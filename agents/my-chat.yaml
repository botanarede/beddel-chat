# Custom Chat Agent - Declarative workflow with TypeScript code-behind
# This demonstrates the new custom-action workflow type

agent:
  id: my-chat
 version: 1.0.0
  protocol: beddel-declarative-protocol/v2.0

metadata:
  name: "Custom Chat Agent"
  description: "Chat agent with TypeScript code-behind demonstration"
  category: "custom"
  route: "/agents/my-chat"

schema:
  input:
    type: "object"
    properties:
      message:
        type: "string"
        minLength: 1
        maxLength: 1000
        description: "User message to process"
      messages:
        type: "array"
        description: "Optional conversation history"
    required: ["message"]

  output:
    type: "object"
    properties:
      response:
        type: "string"
      history:
        type: "array"
      timestamp:
        type: "string"
      processed:
        type: "boolean"
    required: ["response", "processed"]

logic:
  workflow:
    - name: process
      type: custom-action
      action:
        function: "my-chat/chatHandler"
        result: response

output:
  schema:
    response: "$response.response"
    history: "$response.history"
    timestamp: "$response.timestamp"
    processed: "$response.processed"
