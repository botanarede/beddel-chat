# Exemplo de Agente Customizado
# Este arquivo serve como template para criar seus próprios agentes

# Seção: agent
# Define metadados básicos do agente
agent:
  # ID único do agente (use kebab-case)
  id: exemplo-agente
  # Versão do agente (semver)
  version: 1.0.0
  # Protocolo do Beddel (não altere)
  protocol: beddel-declarative-protocol/v2.0

# Seção: metadata
# Informações descritivas sobre o agente
metadata:
  # Nome amigável do agente
  name: "Exemplo de Agente"
  # Descrição do que o agente faz
  description: "Um agente de exemplo que demonstra a estrutura básica"
  # Categoria do agente (utility, creative, public, etc)
  category: "utility"
  # Rota HTTP para o agente (será usado para gerar o nome do método)
  route: "/agents/exemplo-agente"

# Seção: schema
# Define os contratos de entrada e saída
schema:
  # Schema de entrada: o que o agente espera receber
  input:
    type: "object"
    properties:
      # Parâmetro de exemplo: texto
      texto:
        type: "string"
        minLength: 1
        maxLength: 1000
        description: "Texto de entrada para processar"
      # Parâmetro de exemplo: idioma (opcional)
      idioma:
        type: "string"
        pattern: "^[a-z]{2}$"
        description: "Código do idioma (ISO-639-1)"
    # Campos obrigatórios
    required: ["texto"]

  # Schema de saída: o que o agente retorna
  output:
    type: "object"
    properties:
      # Resposta processada
      resposta:
        type: "string"
      # Metadados opcionais
      metadados:
        type: "object"
        properties:
          modelo_utilizado:
            type: "string"
          tempo_processamento:
            type: "number"
    required: ["resposta"]

# Seção: logic
# Define o fluxo de execução do agente
logic:
  # Workflow: lista de passos a executar
  workflow:
    # Passo 1: Gerar resposta usando Genkit
    - name: "gerar-resposta"
      # Tipo de ação (genkit-joke, genkit-translation, genkit-image, etc)
      type: "genkit-joke"
      action:
        # Tipo específico da ação
        type: "joke"
        # Prompt para o modelo (pode usar variáveis com {{nome}})
        prompt: "Baseado no texto '{{texto}}', crie uma resposta criativa e útil."
        # Nome da variável onde o resultado será armazenado
        result: "respostaGerada"

    # Passo 2: Formatar saída (opcional)
    - name: "formatar-saida"
      type: "output-generator"
      action:
        type: "generate"
        output:
          # Mapear resultado para o schema de saída
          resposta: "$respostaGerada.texto"
          metadados:
            modelo_utilizado: "gemini-flash"
            tempo_processamento: 0

# Seção: output
# Mapeia os resultados do workflow para o schema de saída
output:
  schema:
    resposta: "$respostaGerada.texto"

# Como usar este agente:
# 
# 1. Copie este arquivo para /agents/meu-agente.yaml
# 2. Personalize os campos conforme sua necessidade
# 3. Reinicie a aplicação
# 4. Execute via GraphQL:
#
# mutation {
#   executeMethod(
#     methodName: "exemplo-agente.execute"
#     params: { texto: "Olá mundo" }
#     props: { gemini_api_key: "sua-chave-api" }
#   ) {
#     success
#     data
#   }
# }
